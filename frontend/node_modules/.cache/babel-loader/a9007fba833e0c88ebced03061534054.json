{"ast":null,"code":"import { ADD_ITEM_CART, CART_NAME_PAYMENT, CART_SAVE_COUNTRY_CUSTOMER, CART_SAVE_PAYMENT, REMOVE_ALL_FROM_CART, REMOVE_ITEM_CART } from \"../constants/cartconstants\";\nconst cartItemsFromStorage = localStorage.getItem(\"cartItems\") ? JSON.parse(localStorage.getItem(\"cartItems\")) : [];\nconst countryCustomerFromStorage = localStorage.getItem(\"countryCustomer\") ? JSON.parse(localStorage.getItem(\"countryCustomer\")) : {};\nconst paymentShippingFromStorage = localStorage.getItem(\"MethodOfPayment\") ? JSON.parse(localStorage.getItem(\"MethodOfPayment\")) : {};\nconst nameOnCardFromStorage = localStorage.getItem(\"NameOnCard\") ? JSON.parse(localStorage.getItem(\"NameOnCard\")) : {};\nconst initalState = {\n  cartItems: cartItemsFromStorage,\n  countryCustomer: countryCustomerFromStorage,\n  MethodOfPayment: paymentShippingFromStorage,\n  NameOnCard: nameOnCardFromStorage\n};\nexport const cartReducer = function () {\n  let state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : initalState;\n  let action = arguments.length > 1 ? arguments[1] : undefined;\n  switch (action.type) {\n    case ADD_ITEM_CART:\n      const item = action.payload; //the new course added\n      // x.course it's the ID\n      const existingItem = state.cartItems.find(x => x.course === item.course);\n      if (existingItem) {\n        return {\n          ...state,\n          cartItems: state.cartItems.map(x => x.course === existingItem.course ? item : x)\n        };\n      } else {\n        return {\n          ...state,\n          cartItems: [...state.cartItems, item]\n        };\n      }\n    case REMOVE_ITEM_CART:\n      return {\n        ...state,\n        cartItems: state.cartItems.filter(x => x.course !== action.payload)\n      };\n    case REMOVE_ALL_FROM_CART:\n      return {\n        ...state\n      };\n    case CART_SAVE_COUNTRY_CUSTOMER:\n      return {\n        ...state,\n        countryCustomer: action.payload\n      };\n    case CART_SAVE_PAYMENT:\n      return {\n        ...state,\n        MethodOfPayment: action.payload\n      };\n    case CART_NAME_PAYMENT:\n      return {\n        ...state,\n        NameOnCard: action.payload\n      };\n    default:\n      return state;\n  }\n};","map":{"version":3,"names":["ADD_ITEM_CART","CART_NAME_PAYMENT","CART_SAVE_COUNTRY_CUSTOMER","CART_SAVE_PAYMENT","REMOVE_ALL_FROM_CART","REMOVE_ITEM_CART","cartItemsFromStorage","localStorage","getItem","JSON","parse","countryCustomerFromStorage","paymentShippingFromStorage","nameOnCardFromStorage","initalState","cartItems","countryCustomer","MethodOfPayment","NameOnCard","cartReducer","state","action","type","item","payload","existingItem","find","x","course","map","filter"],"sources":["D:/Work/V-Book/project/V-Book-Project/frontend/src/redux/reducers/cartReducer.js"],"sourcesContent":["import {\r\n\tADD_ITEM_CART,\r\n\tCART_NAME_PAYMENT,\r\n\tCART_SAVE_COUNTRY_CUSTOMER,\r\n\tCART_SAVE_PAYMENT,\r\n\tREMOVE_ALL_FROM_CART,\r\n\tREMOVE_ITEM_CART,\r\n} from \"../constants/cartconstants\";\r\n\r\nconst cartItemsFromStorage = localStorage.getItem(\"cartItems\") ? JSON.parse(localStorage.getItem(\"cartItems\")) : [];\r\n\r\nconst countryCustomerFromStorage = localStorage.getItem(\"countryCustomer\") ? JSON.parse(localStorage.getItem(\"countryCustomer\")) : {};\r\n\r\nconst paymentShippingFromStorage = localStorage.getItem(\"MethodOfPayment\") ? JSON.parse(localStorage.getItem(\"MethodOfPayment\")) : {};\r\n\r\nconst nameOnCardFromStorage = localStorage.getItem(\"NameOnCard\") ? JSON.parse(localStorage.getItem(\"NameOnCard\")) : {};\r\n\r\nconst initalState = {\r\n\tcartItems: cartItemsFromStorage,\r\n\tcountryCustomer: countryCustomerFromStorage,\r\n\tMethodOfPayment: paymentShippingFromStorage,\r\n\tNameOnCard: nameOnCardFromStorage,\r\n};\r\nexport const cartReducer = (state = initalState, action) => {\r\n\tswitch (action.type) {\r\n\t\tcase ADD_ITEM_CART:\r\n\t\t\tconst item = action.payload; //the new course added\r\n\t\t\t// x.course it's the ID\r\n\t\t\tconst existingItem = state.cartItems.find((x) => x.course === item.course);\r\n\t\t\tif (existingItem) {\r\n\t\t\t\treturn {\r\n\t\t\t\t\t...state,\r\n\t\t\t\t\tcartItems: state.cartItems.map((x) => (x.course === existingItem.course ? item : x)),\r\n\t\t\t\t};\r\n\t\t\t} else {\r\n\t\t\t\treturn {\r\n\t\t\t\t\t...state,\r\n\t\t\t\t\tcartItems: [...state.cartItems, item],\r\n\t\t\t\t};\r\n\t\t\t}\r\n\t\tcase REMOVE_ITEM_CART:\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\tcartItems: state.cartItems.filter((x) => x.course !== action.payload),\r\n\t\t\t};\r\n\r\n\t\tcase REMOVE_ALL_FROM_CART:\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t};\r\n\r\n\t\tcase CART_SAVE_COUNTRY_CUSTOMER:\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\tcountryCustomer: action.payload,\r\n\t\t\t};\r\n\r\n\t\tcase CART_SAVE_PAYMENT:\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\tMethodOfPayment: action.payload,\r\n\t\t\t};\r\n\r\n\t\tcase CART_NAME_PAYMENT:\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\tNameOnCard: action.payload,\r\n\t\t\t};\r\n\t\tdefault:\r\n\t\t\treturn state;\r\n\t}\r\n};\r\n"],"mappings":"AAAA,SACCA,aAAa,EACbC,iBAAiB,EACjBC,0BAA0B,EAC1BC,iBAAiB,EACjBC,oBAAoB,EACpBC,gBAAgB,QACV,4BAA4B;AAEnC,MAAMC,oBAAoB,GAAGC,YAAY,CAACC,OAAO,CAAC,WAAW,CAAC,GAAGC,IAAI,CAACC,KAAK,CAACH,YAAY,CAACC,OAAO,CAAC,WAAW,CAAC,CAAC,GAAG,EAAE;AAEnH,MAAMG,0BAA0B,GAAGJ,YAAY,CAACC,OAAO,CAAC,iBAAiB,CAAC,GAAGC,IAAI,CAACC,KAAK,CAACH,YAAY,CAACC,OAAO,CAAC,iBAAiB,CAAC,CAAC,GAAG,CAAC,CAAC;AAErI,MAAMI,0BAA0B,GAAGL,YAAY,CAACC,OAAO,CAAC,iBAAiB,CAAC,GAAGC,IAAI,CAACC,KAAK,CAACH,YAAY,CAACC,OAAO,CAAC,iBAAiB,CAAC,CAAC,GAAG,CAAC,CAAC;AAErI,MAAMK,qBAAqB,GAAGN,YAAY,CAACC,OAAO,CAAC,YAAY,CAAC,GAAGC,IAAI,CAACC,KAAK,CAACH,YAAY,CAACC,OAAO,CAAC,YAAY,CAAC,CAAC,GAAG,CAAC,CAAC;AAEtH,MAAMM,WAAW,GAAG;EACnBC,SAAS,EAAET,oBAAoB;EAC/BU,eAAe,EAAEL,0BAA0B;EAC3CM,eAAe,EAAEL,0BAA0B;EAC3CM,UAAU,EAAEL;AACb,CAAC;AACD,OAAO,MAAMM,WAAW,GAAG,YAAiC;EAAA,IAAhCC,KAAK,uEAAGN,WAAW;EAAA,IAAEO,MAAM;EACtD,QAAQA,MAAM,CAACC,IAAI;IAClB,KAAKtB,aAAa;MACjB,MAAMuB,IAAI,GAAGF,MAAM,CAACG,OAAO,CAAC,CAAC;MAC7B;MACA,MAAMC,YAAY,GAAGL,KAAK,CAACL,SAAS,CAACW,IAAI,CAAEC,CAAC,IAAKA,CAAC,CAACC,MAAM,KAAKL,IAAI,CAACK,MAAM,CAAC;MAC1E,IAAIH,YAAY,EAAE;QACjB,OAAO;UACN,GAAGL,KAAK;UACRL,SAAS,EAAEK,KAAK,CAACL,SAAS,CAACc,GAAG,CAAEF,CAAC,IAAMA,CAAC,CAACC,MAAM,KAAKH,YAAY,CAACG,MAAM,GAAGL,IAAI,GAAGI,CAAE;QACpF,CAAC;MACF,CAAC,MAAM;QACN,OAAO;UACN,GAAGP,KAAK;UACRL,SAAS,EAAE,CAAC,GAAGK,KAAK,CAACL,SAAS,EAAEQ,IAAI;QACrC,CAAC;MACF;IACD,KAAKlB,gBAAgB;MACpB,OAAO;QACN,GAAGe,KAAK;QACRL,SAAS,EAAEK,KAAK,CAACL,SAAS,CAACe,MAAM,CAAEH,CAAC,IAAKA,CAAC,CAACC,MAAM,KAAKP,MAAM,CAACG,OAAO;MACrE,CAAC;IAEF,KAAKpB,oBAAoB;MACxB,OAAO;QACN,GAAGgB;MACJ,CAAC;IAEF,KAAKlB,0BAA0B;MAC9B,OAAO;QACN,GAAGkB,KAAK;QACRJ,eAAe,EAAEK,MAAM,CAACG;MACzB,CAAC;IAEF,KAAKrB,iBAAiB;MACrB,OAAO;QACN,GAAGiB,KAAK;QACRH,eAAe,EAAEI,MAAM,CAACG;MACzB,CAAC;IAEF,KAAKvB,iBAAiB;MACrB,OAAO;QACN,GAAGmB,KAAK;QACRF,UAAU,EAAEG,MAAM,CAACG;MACpB,CAAC;IACF;MACC,OAAOJ,KAAK;EAAC;AAEhB,CAAC"},"metadata":{},"sourceType":"module"}