{"ast":null,"code":"var _jsxFileName = \"D:\\\\Work\\\\V-Book\\\\project\\\\V-Book-Project\\\\frontend\\\\src\\\\components\\\\body\\\\profile\\\\EditUser.js\",\n  _s = $RefreshSig$();\nimport { useParams, useNavigate } from \"react-router-dom\";\nimport { React, useState, useEffect } from \"react\";\nimport { useSelector } from \"react-redux\";\nimport axios from \"axios\";\nimport { Helmet } from \"react-helmet\";\nimport { ArrowLeftOutlined, RetweetOutlined } from \"@ant-design/icons\";\nimport { Button, Input, Checkbox } from \"antd\";\nimport { showSuccessMsg, showErrMsg } from \"../../utils/notification/Notification\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst EditUser = () => {\n  _s();\n  const [size, setSize] = useState(\"middle\");\n  const {\n    id\n  } = useParams();\n  const history = useNavigate();\n  const [editUser, setEditUser] = useState([]);\n  const [num, setNum] = useState(0);\n  const usersInfo = useSelector(state => state.usersInfo);\n  const {\n    users\n  } = usersInfo;\n  const token = useSelector(state => state.token);\n  const [err, setErr] = useState(false);\n  const [success, setSuccess] = useState(false);\n  const [checkAdmin, setCheckAdmin] = useState(false);\n  const handleCheck = () => {\n    setSuccess(\"\");\n    setErr(\"\");\n    setCheckAdmin(!checkAdmin);\n    setNum(num + 1);\n  };\n  const handleUpdate = async () => {\n    try {\n      if (num % 2 !== 0) {\n        const res = await axios.patch(`/user/update_role/${editUser._id}`, {\n          role: checkAdmin ? 1 : 0\n        }, {\n          headers: {\n            Authorization: token\n          }\n        });\n        setSuccess(res.data.msg);\n        setNum(0);\n      }\n    } catch (err) {\n      err.response.data.msg && setErr(err.response.data.msg);\n    }\n  };\n  useEffect(() => {\n    if (users.length !== 0) {\n      users.forEach(user => {\n        if (user._id === id) {\n          setEditUser(user);\n          setCheckAdmin(user.role === 1 ? true : false);\n        }\n      });\n    } else {\n      history(\"/profile\");\n    }\n  }, [users, id, history]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(Helmet, {\n      children: /*#__PURE__*/_jsxDEV(\"title\", {\n        children: \"EDIT USER\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 74,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 7\n    }, this), err && showErrMsg(err), success && showSuccessMsg(success), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"edit-page\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"row\",\n        children: /*#__PURE__*/_jsxDEV(Button, {\n          className: \"btn-back\",\n          onClick: () => history.goBack(),\n          size: size,\n          type: \"primary\",\n          shape: \"round\",\n          icon: /*#__PURE__*/_jsxDEV(ArrowLeftOutlined, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 86,\n            columnNumber: 19\n          }, this),\n          children: \"Go Back\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 80,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 79,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"col-left\",\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          children: \"Edit User\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 92,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"form-group\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            children: \"Name \"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 94,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Input, {\n            type: \"text\",\n            name: \"name\",\n            value: editUser.name,\n            placeholder: \"Your name\",\n            disabled: true\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 95,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 93,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"form-group\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            children: \"Email \"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 104,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Input, {\n            type: \"text\",\n            name: \"email\",\n            value: editUser.email,\n            placeholder: \"Your email address\",\n            disabled: true\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 105,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 103,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: /*#__PURE__*/_jsxDEV(Checkbox, {\n            onChange: handleCheck,\n            checked: checkAdmin,\n            children: \"isAdmin\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 114,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 113,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(_Fragment, {\n          children: [\" \", /*#__PURE__*/_jsxDEV(Button, {\n            className: \"btn-update-user\",\n            shape: \"round\",\n            onClick: handleUpdate,\n            size: size,\n            type: \"primary\",\n            children: [\"Update \", /*#__PURE__*/_jsxDEV(RetweetOutlined, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 127,\n              columnNumber: 22\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 120,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 91,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 72,\n    columnNumber: 5\n  }, this);\n};\n_s(EditUser, \"8f5+TVoUFhvwRSha+qZR0OyofIY=\", false, function () {\n  return [useParams, useNavigate, useSelector, useSelector];\n});\n_c = EditUser;\nexport default EditUser;\nvar _c;\n$RefreshReg$(_c, \"EditUser\");","map":{"version":3,"names":["useParams","useNavigate","React","useState","useEffect","useSelector","axios","Helmet","ArrowLeftOutlined","RetweetOutlined","Button","Input","Checkbox","showSuccessMsg","showErrMsg","EditUser","size","setSize","id","history","editUser","setEditUser","num","setNum","usersInfo","state","users","token","err","setErr","success","setSuccess","checkAdmin","setCheckAdmin","handleCheck","handleUpdate","res","patch","_id","role","headers","Authorization","data","msg","response","length","forEach","user","goBack","name","email"],"sources":["D:/Work/V-Book/project/V-Book-Project/frontend/src/components/body/profile/EditUser.js"],"sourcesContent":["import { useParams, useNavigate } from \"react-router-dom\";\r\nimport { React, useState, useEffect } from \"react\";\r\nimport { useSelector } from \"react-redux\";\r\nimport axios from \"axios\";\r\nimport { Helmet } from \"react-helmet\";\r\n\r\nimport { ArrowLeftOutlined, RetweetOutlined } from \"@ant-design/icons\";\r\nimport { Button, Input, Checkbox } from \"antd\";\r\nimport {\r\n  showSuccessMsg,\r\n  showErrMsg,\r\n} from \"../../utils/notification/Notification\";\r\n\r\nconst EditUser = () => {\r\n  const [size, setSize] = useState(\"middle\");\r\n\r\n  const { id } = useParams();\r\n  const history = useNavigate();\r\n  const [editUser, setEditUser] = useState([]);\r\n  const [num, setNum] = useState(0);\r\n\r\n  const usersInfo = useSelector((state) => state.usersInfo);\r\n  const { users } = usersInfo;\r\n  const token = useSelector((state) => state.token);\r\n\r\n  const [err, setErr] = useState(false);\r\n  const [success, setSuccess] = useState(false);\r\n\r\n  const [checkAdmin, setCheckAdmin] = useState(false);\r\n\r\n  const handleCheck = () => {\r\n    setSuccess(\"\");\r\n    setErr(\"\");\r\n    setCheckAdmin(!checkAdmin);\r\n    setNum(num + 1);\r\n  };\r\n  const handleUpdate = async () => {\r\n    try {\r\n      if (num % 2 !== 0) {\r\n        const res = await axios.patch(\r\n          `/user/update_role/${editUser._id}`,\r\n          {\r\n            role: checkAdmin ? 1 : 0,\r\n          },\r\n          {\r\n            headers: { Authorization: token },\r\n          }\r\n        );\r\n\r\n        setSuccess(res.data.msg);\r\n        setNum(0);\r\n      }\r\n    } catch (err) {\r\n      err.response.data.msg && setErr(err.response.data.msg);\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (users.length !== 0) {\r\n      users.forEach((user) => {\r\n        if (user._id === id) {\r\n          setEditUser(user);\r\n          setCheckAdmin(user.role === 1 ? true : false);\r\n        }\r\n      });\r\n    } else {\r\n      history(\"/profile\");\r\n    }\r\n  }, [users, id, history]);\r\n\r\n  return (\r\n    <div>\r\n      <Helmet>\r\n        <title>EDIT USER</title>\r\n      </Helmet>\r\n      {err && showErrMsg(err)}\r\n      {success && showSuccessMsg(success)}\r\n      <div className=\"edit-page\">\r\n        <div className=\"row\">\r\n          <Button\r\n            className=\"btn-back\"\r\n            onClick={() => history.goBack()}\r\n            size={size}\r\n            type=\"primary\"\r\n            shape=\"round\"\r\n            icon={<ArrowLeftOutlined />}\r\n          >\r\n            Go Back\r\n          </Button>\r\n        </div>\r\n        <div className=\"col-left\">\r\n          <h2>Edit User</h2>\r\n          <div className=\"form-group\">\r\n            <label>Name </label>\r\n            <Input\r\n              type=\"text\"\r\n              name=\"name\"\r\n              value={editUser.name}\r\n              placeholder=\"Your name\"\r\n              disabled\r\n            />\r\n          </div>\r\n          <div className=\"form-group\">\r\n            <label>Email </label>\r\n            <Input\r\n              type=\"text\"\r\n              name=\"email\"\r\n              value={editUser.email}\r\n              placeholder=\"Your email address\"\r\n              disabled\r\n            />\r\n          </div>\r\n          <div>\r\n            <Checkbox onChange={handleCheck} checked={checkAdmin}>\r\n              isAdmin\r\n            </Checkbox>\r\n          </div>\r\n          <>\r\n            {\" \"}\r\n            <Button\r\n              className=\"btn-update-user\"\r\n              shape=\"round\"\r\n              onClick={handleUpdate}\r\n              size={size}\r\n              type=\"primary\"\r\n            >\r\n              Update <RetweetOutlined />\r\n            </Button>\r\n          </>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default EditUser;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}